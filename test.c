#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>

#include "udplib.h"
#include "ipc.h"

// Emulate the Multics bootstrap sequence

// Multics DMA's the following code into the FNP


#define TALLY  00517

static uint64_t gicb [TALLY] =
  {
    0100002060002,
    0000000000070,
    0100000000000,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000722000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000722000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000722000736,
    0001000000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000722000736,
    0001005000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000722000736,
    0001012000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000722000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000722000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000722000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000722000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000722000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000722000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000722000736,
    0001017000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000722000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000722000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000722000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000736000736,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000725000725,
    0000725000725,
    0000725000725,
    0000725000725,
    0000000000000,
    0000000000000,
    0000000000000,
    0100454030002,
    0004260043202,
    0071112000000,
    0047771064046,
    0007305026303,
    0433200044161,
    0054760071005,
    0000000000000,
    0000000000000,
    0003166004277,
    0173776041002,
    0071057000505,
    0024266064026,
    0007263006154,
    0033200017167,
    0043170107000,
    0217000173001,
    0273001076164,
    0064773007244,
    0233703033614,
    0037240433300,
    0003242043134,
    0471150007126,
    0071006007123,
    0473000071003,
    0037122056106,
    0076105075715,
    0014112007221,
    0773006017063,
    0007217233703,
    0033606072064,
    0043072041002,
    0010033000630,
    0004050043103,
    0071012044667,
    0045002015063,
    0215000054663,
    0273002173776,
    0064771371001,
    0014656007072,
    0473070014655,
    0453053673002,
    0433200041002,
    0010005000454,
    0060646433100,
    0071777000000,
    0347000307001,
    0733622064002,
    0037036333622,
    0064002037034,
    0317001373002,
    0173776064765,
    0076763471762,
    0100632000006,
    0000000000075,
    0100656000001,
    0000000000073,
    0100000000000,
    0000000000070,
    0100000000000,
    0000016777775,
    0000000000001,
    0024000000000,
    0040000020000,
    0400000000000,
    0410000420000,
    0430000000463,
    0000733001000,
    0001002100452,
    0147000257000,
    0173001273001,
    0063006064773,
    0007005003766,
    0043767171777,
    0000000000000,
    0000670777764,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000433101,
    0071777000000,
    0433102071777,
    0433103071777,
    0433104071777,
    0433105071777,
    0000000471777,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000673003,
    0017232056775,
    0071020000000,
    0673004017225,
    0056775071013,
    0000000673005,
    0017220056775,
    0071006000000,
    0673014017213,
    0056775071001,
    0047431064703,
    0044624054423,
    0056706003113,
    0004136043115,
    0041002071526,
    0001036043112,
    0003105041002,
    0071521001043,
    0043106003101,
    0041002071514,
    0001050043102,
    0003075041002,
    0071507001055,
    0014054043051,
    0003051473740,
    0107000217000,
    0173001273001,
    0573001064773,
    0007144017612,
    0072560044557,
    0033604773002,
    0017555004033,
    0024676064631,
    0003042204016,
    0214776204014,
    0214000214002,
    0043056041002,
    0010477001154,
    0043053004037,
    0071456000000,
    0047016007016,
    0067644064415,
    0027643064413,
    0471001000460,
    0001174000740,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000000000000,
    0000002000420,
    0000456000460,
    0000376000030,
    0000002000552,
    0101156000004,
    0000000000074,
    0101134000004,
    0000000000070,
    0100000000000,
    0000012001117,
    0100002060002,
    0010101061002,
    0100742000010,
    0010600040076,
    0101000060000,
    0020600040076,
    0121000060000,
    0030600040076,
    0141000067204,
    0000000060070,
    0100000060000,
    0000000000070,
    0000000000000,
    0004500000037,
    0000000000000,
    0000000056410,
    0332302500004,
    0726346307451,
    0000000000000
  };


int main (int argc, char * argv [])
  {
    int link;
    int ret = udp_create ("4421:4431", & link);
    if (ret != 0)
      {
        printf ("udp_create return %d\n", ret);
        exit (1);
      }
    return 0;
  }

